<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2P Video Chat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        input, button {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .video-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        video {
            width: 100%;
            height: 300px;
            background: #000;
            border-radius: 8px;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background: #e9ecef;
        }
        .connected {
            color: #28a745;
        }
        .disconnected {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé• P2P Video Chat</h1>
        
        <div class="controls">
            <input type="text" id="roomInput" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∫–æ–º–Ω–∞—Ç—ã">
            <button onclick="createRoom()">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
            <button onclick="joinRoom()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
            <button onclick="leaveRoom()" disabled id="leaveBtn">–ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
            <button onclick="toggleVideo()" id="videoBtn">–í—ã–∫–ª—é—á–∏—Ç—å –≤–∏–¥–µ–æ</button>
            <button onclick="toggleAudio()" id="audioBtn">–í—ã–∫–ª—é—á–∏—Ç—å audio</button>
            <button onclick="requestMediaPermissions()" id="mediaBtn">–†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É</button>
        </div>

        <div class="status">
            –°—Ç–∞—Ç—É—Å: <span id="status">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span> | 
            –ö–æ–º–Ω–∞—Ç–∞: <span id="roomStatus">–ù–µ—Ç</span> |
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <span id="userCount">0</span>
        </div>

        <div class="video-container">
            <div>
                <h3>–í–∞—à–µ –≤–∏–¥–µ–æ</h3>
                <video id="localVideo" autoplay muted></video>
            </div>
            <div>
                <h3>–£–¥–∞–ª–µ–Ω–Ω–æ–µ –≤–∏–¥–µ–æ</h3>
                <video id="remoteVideo" autoplay></video>
            </div>
        </div>

        <div id="connectionStatus"></div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Socket.io –∫–ª–∏–µ–Ω—Ç -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="app.js"></script>
</body>
</html>